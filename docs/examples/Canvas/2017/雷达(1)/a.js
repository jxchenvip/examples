!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i();else if("function"==typeof define&&define.amd)define([],i);else{var e=i();for(var s in e)("object"==typeof exports?exports:t)[s]=e[s]}}(this,function(){return function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i){"use strict";var e=function(t,i){function e(t,i){return Object.keys(i).forEach(function(e){t[e]=i[e]}),t}function s(t,i){return l.font=t,l.measureText(i).width}function n(t){var i=9999909,e=-1;return t.forEach(function(t,s){t<i&&(i=t,e=s)}),e}function h(t,i){var e,s=t.x-i.x,n=t.y-i.y;return e=Math.sqrt(s*s+n*n)}function o(t){return Math.PI/180*t}function r(t,i){return Math.floor(Math.random()*(i-t))+t}var a,c,l,u,f,d,y,p,x,w,m,g,v,S,k,b,P=function(i){var e=i.backingStorePixelRatio||i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/e};return a=function(s){this.run=!0,this.storage=[],this.polygons=[],this.backgrounds=[],this.defaults={rotate:720,selector:"",speed:4,colors:["#967444","#9499a3","#c54444"],texts:[{name:"轩亦辰",money:247,unit:"万",state:"预测投资",type:0},{name:"轩亦辰",money:247,unit:"万",state:"预测提现",type:1},{name:"轩亦辰",state:"潜在流失",type:2},{name:"轩亦辰",money:247,unit:"万",state:"预测投资",type:0},{name:"轩亦辰",money:247,unit:"万",state:"预测提现",type:1},{name:"轩亦辰",state:"潜在流失",type:2},{name:"轩亦辰",money:247,unit:"万",state:"预测投资",type:0},{name:"轩亦辰",money:247,unit:"万",state:"预测提现",type:1},{name:"轩亦辰",state:"潜在流失",type:2}]},this.init=function(s){if(t.addEventListener("resize",this.resize.bind(this),!1),void 0===s||!s.selector)return console.warn("particles.js: No selector is specified! Check https://github.com/marcbruederlin/particles.js#options"),!1;u=e(this.defaults,s),c=i.querySelector(u.selector),c.height=c.width=Math.min(t.innerWidth,t.innerHeight),l=c.getContext("2d"),m=P(l),v=c.width/2/m,b=c.height/2/m,u=e(this.defaults,s),u.texts.splice(0);for(var n=0;n<r(3,10);n++)u.texts[n]={},u.texts[n].type=r(0,3),u.texts[n].name="轩亦辰",0==u.texts[n].type&&(u.texts[n].money=r(0,999),u.texts[n].unit="万",u.texts[n].state="预测投资"),1==u.texts[n].type&&(u.texts[n].money=r(0,999),u.texts[n].unit="万",u.texts[n].state="预测撤资"),2==u.texts[n].type&&(u.texts[n].state="预测流失");this.handR=.08,this.r0=.08,this.r1=.9,this.r2=1,this.type0Total=0,this.type1Total=0,this.type2Total=0,this.calcRadius(),this.storage=this.createPoints(),this.createBackgrounds(),this.createPpolygons(),this.hand=new x(v,b,.05*v,.03*v,.02*v,v*this.r1),this.rotates=[],this.createRotates(),this.animate()},this.createRotates=function(){for(var t=5,i=0;i<t;i++){var e=new w(v,b,((1-this.r1)/2+this.r1)*v,"#b4bacb",360*i/t);this.rotates.push(e)}},this.calcRadius=function(){var t=0,i=0,e=0;u.texts.forEach(function(s){0==s.type&&t++,1==s.type&&i++,2==s.type&&e++}.bind(this)),this.type0Total=t,this.type1Total=i,this.type2Total=e,this.r0=Math.min(Math.max(t/(t+i),0==t?0:.15),0==i&&0==e?.9:.62)||0},this.getPos=function(t,i,e){var s=o(r(0,360));return{x:t+e*Math.cos(s),y:i+e*Math.sin(s)}},this.createPoints=function(){var t=[],i=u.texts,e=0,s=function(){var n=.84,o=.28,a=Math.min(Math.max(this.r0,o),n),c=r(100*o,100*a)/100,l=Math.min(this.r0+o,n),f=r(100*l,100*n)/100;if(e===u.texts.length)return!1;for(var d=i[e],y=0==d.type?c:1==d.type?f:n,p=this.getPos(v,b,v*y),x=t.length;x--;)if(55>h(p,t[x]))return s(),!1;e++,t.push(p),s()}.bind(this);return s(),t},this.createPpolygons=function(){this.storage.forEach(function(t,i){var e=u.texts[i],s=u.colors[e.type],n=new k(t.x,t.y,s,e);n.scale=v<187?.9:1,this.polygons.push(n)}.bind(this))},this.createBackgrounds=function(){var t=this.r0,i=this.r1,e=this.r2,s=new f(v,b,v*t,"#ffedcf"),n=new f(v,b,v*i,"#e5eaf2"),h=new f(v,b,v*e,"#fafbfc"),o=new y(v,b,v*(t+this.handR)/2,1,"#fff"),r=new y(v,b,v*((i-t)/2+t),1,"#fff"),a=new y(v,b,v*((e-i)/2+i),1,"#e8e9ee");this.backgrounds.push(h,n,s,o,r,a)},this.resize=function(){},this.animate=function(){this.draw(),t.requestAnimFrame(this.animate.bind(this))};var n=0,a=0;this.draw=function(){l.clearRect(0,0,c.width,c.height),this.backgrounds.forEach(function(t){t.draw()}),this.hand.setRotation(Math.min(n+=u.speed,u.rotate)),this.hand.draw(),a--,a%=360,this.rotates.forEach(function(t){t.rotate=a,t.draw()}),n>=u.rotate&&this.polygons.forEach(function(t){t.fadeIn(),t.draw()}),this.update()},this.update=function(){}},w=function(t,i,e,s,n){this.x=t,this.y=i,this.rotate=0,this.fillStyle=s,this.radius=e,this.sRotate=n||0,this.init()},w.prototype={init:function(){this.arcTo=new y(0,0,this.radius,2,this.fillStyle,30)},draw:function(){l.save(),l.translate(this.x,this.y),l.rotate(o(this.sRotate+this.rotate)),this.arcTo.draw(),l.restore(),l.restore()}},k=function(t,i,e,s){this.x=t,this.y=i,this.cx=0,this.cy=0,this.side=6,this.radius=30,this.rotate=0,this.scale=1,this.opacity=1,this.sideWidth=.5,this.fillStyle="rgba(255, 255, 255, .6)",this.strokeStyle=e||"#967444",this.fillTexts=s||{},this._polygon=null,this._line=null,this._text=[],this.init(),this._x=0,this._y=0,this.resetAnimateParams()},k.prototype={init:function(){this._polygon=this.drawPolygon(),this._line=this.drawLine(),this._text=this.drawText()},drawPolygon:function(){return new S(this.cx,this.cy,this.radius,this.side,this.sideWidth,this.fillStyle,this.strokeStyle,this.x,this.y)},resetAnimateParams:function(){this._time=0,this._beginning=0,this._change=100,this._duration=100},fadeIn:function(){var t=Tween.Linear(this._time++,this._beginning,this._change,this._duration);t>=this._change&&(t=100),this.opacity=t/100},drawLine:function(){var t=this.fillTexts,i=.7*this.radius,e=.25*this.radius;return t&&2==t.type&&(e=0),new g(this.cx-i,this.cy+e,this.cx+i,this.cy+e,this.sideWidth,this.strokeStyle)},setRotation:function(t){this.rotate=t},setOpacity:function(t){this.opacity=t},setScale:function(t){this.scale=t},drawText:function(){var t=[],i=this.fillTexts,e=i.name||"",n=i.money||"",h=i.unit||"",o=i.state||"",r=.5*this.radius,a=.15*this.radius,c=this.strokeStyle,l="8px Georgia",u="18px Georgia",f=s(u,n)/2,d=s(l,h)/2;return i&&2==i.type&&(r=.35*this.radius),t.push(new p(this.cx,this.cy-r,e,l,c)),t.push(new p(this.cx+f,this.cy,h,l,c)),t.push(new p(this.cx-d,this.cy-a,n,u,1==i.type?"#3f9c66":c)),t.push(new p(this.cx,this.cy+r,o,l,c)),t},draw:function(){l.save(),l.translate(this.x-this._x,this.y-this._y),l.rotate(o(this.rotate)),l.scale(this.scale,this.scale),l.globalAlpha=this.opacity,this._polygon.draw(),this._line.draw(),this._text.forEach(function(t){t.draw()}),l.restore()}},x=function(t,i,e,s,n,h){this.x=t,this.y=i,this.radius=e,this.lineWidth=s,this.storage=[],this.arrowWidth=n,this.arrowRadius=h,this.rotate=0,this.init()},x.prototype={init:function(){var t=new f(0,0,this.radius,"#fff"),i=new y(0,0,this.radius,this.lineWidth,"#be9d70"),e=new y(0,0,this.radius+this.lineWidth,this.lineWidth,"#38404d"),s=new d(0,0,this.arrowWidth,this.arrowRadius,"#be9d70","#e0ceb5");this.storage.push(s,t,e,i)},setRotation:function(t){this.rotate=t},getStatus:function(){return this.rotate>=360},createMask:function(){for(var t=90,i=0,e=60,s=Math.floor(Math.min(this.rotate,360)/360*e),n=0;n<s+1;n++)l.save(),l.beginPath(),l.moveTo(0,0),l.arc(0,0,this.arrowRadius,o(t+i),o(t+360*n/e),!1),l.moveTo(0,0),l.lineCap="round",l.lineJoin="round",l.fillStyle="rgba(255, 255, 255, "+n/s/2+")",l.fill(),l.closePath(),l.restore(),i=360*n/e},draw:function(){var t=this.getStatus();l.save(),l.translate(this.x,this.y),!t&&this.createMask(),l.rotate(o(this.rotate)),t&&this.createMask(),this.storage.forEach(function(t){t.draw()}),l.restore()}},d=function(t,i,e,s,n,h){this.x=t,this.y=i,this.width=e,this.fillStyle=n,this.strokeStyle=h,this.radius=s},d.prototype={draw:function(){l.save(),l.beginPath(),l.fillStyle=this.fillStyle,l.strokeStyle=this.strokeStyle,l.moveTo(-this.width,0),l.lineTo(this.width,0),l.lineTo(0,this.radius),l.closePath(),l.stroke(),l.fill(),l.restore()}},S=function(t,i,e,s,n,h,o,r,a){this.x=t,this.y=i,this.cx=r||0,this.cy=a||0,this.side=s,this.radius=e,this.fillStyle=h,this.strokeStyle=o,this.points=[],this.lineWidth=n,this.rotate=30,this.index=0,this.arc=null,this.arcTo=null,this.init()},S.prototype={init:function(){for(var t=this.side+1;t--;){var i=360/this.side,e=o(t*i+this.rotate),s=Math.cos(e)*this.radius+this.x,n=Math.sin(e)*this.radius+this.y;this.points.push({x:s,y:n})}this.createSmallArc()},createSmallArc:function(){var t=[];this.points.forEach(function(i){t.push(h({x:i.x+this.cx,y:i.y+this.cy},{x:v,y:b}))}.bind(this)),this.index=n(t);var i=this.points[this.index];this.arc=new f(i.x,i.y,2,this.strokeStyle),this.arcTo=new y(i.x,i.y,4,this.sideWidth,this.strokeStyle)},setRotation:function(t){this.rotate=t},draw:function(){l.save(),this.arc.draw(),this.arcTo.draw(),l.beginPath(),l.strokeStyle=this.strokeStyle,l.fillStyle=this.fillStyle,l.moveTo(this.points[0].x,this.points[0].y),this.points.forEach(function(t){l.lineTo(t.x,t.y)}.bind(this)),l.fill(),l.stroke(),l.closePath(),l.restore()}},p=function(t,i,e,s,n){this.x=t,this.y=i,this.text=e,this.font=s,this.fillStyle=n},p.prototype={draw:function(){l.save(),l.beginPath(),l.textAlign="center",l.textBaseline="middle",l.font=this.font,l.fillStyle=this.fillStyle,l.fillText(this.text,this.x,this.y),l.closePath(),l.restore()}},g=function(t,i,e,s,n,h){this.sx=t,this.sy=i,this.ex=e,this.ey=s,this.lineWidth=n,this.strokeStyle=h},g.prototype={draw:function(){l.save(),l.beginPath(),l.lineWidth=this.lineWidth,l.strokeStyle=this.strokeStyle,l.lineCap="round",l.lineJoin="round",l.moveTo(this.sx,this.sy),l.lineTo(this.ex,this.ey),l.stroke(),l.closePath(),l.restore()}},f=function(t,i,e,s){this.x=t,this.y=i,this.r=e,this.fillStyle=s},f.prototype={draw:function(){l.save(),l.beginPath(),l.fillStyle=this.fillStyle,l.arc(this.x,this.y,this.r,0,o(360)),l.fill(),l.closePath(),l.restore()}},y=function(t,i,e,s,n,h){this.x=t,this.y=i,this.r=e,this.lineWidth=s,this.strokeStyle=n,this.deg=h||360},y.prototype={draw:function(){l.save(),l.beginPath(),l.lineWidth=this.lineWidth,l.strokeStyle=this.strokeStyle,l.arc(this.x,this.y,this.r,0,o(this.deg)),l.stroke(),l.closePath(),l.restore()}},t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(i){t.setTimeout(i,1e3/60)}}(),new a}(window,document);e.init({selector:"#cvs"})}])});
//# sourceMappingURL=a.js.map