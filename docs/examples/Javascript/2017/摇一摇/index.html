<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <script>
    var ready = true;

    function donghua() {
        alert('a');
        setTimeout(function() {
            ready = true;
        }, 3000)
    });

    if (window.DeviceMotionEvent) {
        var speed = 25; //定义一个数值
        var x = y = z = lastX = lastY = lastZ = 0; //重置所有数值
        window.addEventListener('devicemotion', function() {
            var acceleration = event.accelerationIncludingGravity; //将传感值赋给acceleration
            x = acceleration.x;
            y = acceleration.y;
            z = acceleration.z;
            if (Math.abs(x - lastX) > speed || Math.abs(y - lastY) > speed) {
                // TODO:在此处可以实现摇一摇之后所要进行的数据逻辑操作
                if (ready) {
                    donghua();
                    ready = false;
                }
            }
            lastX = x;
            lastY = y;
            lastZ = z;
        }, false);
    }
    </script>
</body>

</html>
